<div class="container">
  <label class="dob-label">
    {{ label }}
    @if (isRequired) {
    <span class="required-star">*</span>
    }
  </label>

  <div class="input-container ">
      <orms-icon [name]="'home'" class="calendar-icon1" width="20" height="20" viewBox="0 0 24 24"></orms-icon>
 
    <input type="text" class="dob-input" [value]="formattedDate" (click)="openDatePicker($event)"
      placeholder="dd-mm-yyyy" readonly required />

 

    <!-- <svg xmlns="http://www.w3.org/2000/svg" class="calendar-icon" width="20" height="20" viewBox="0 0 24 24"
        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M8 2v4"></path>
        <path d="M16 2v4"></path>
        <rect width="18" height="18" x="3" y="4" rx="2"></rect>
        <path d="M3 10h18"></path>
      </svg> -->
      
       <orms-icon [name]="calendarIcon" class="calendar-icon" width="20" height="20" viewBox="0 0 24 24"></orms-icon>


    @if (showCalendar) {
    <div class="calendar-overlay" (click)="closeCalendar()">
      <div class="calendar-container" (click)="$event.stopPropagation()" (click)="closeMonthDropdown()" (click)="closeYearDropdown()">
        <div class="calendar-header">
          <div class="month-year-selectors">
            <!-- Month Dropdown -->
            <div class="dropdown" (click)="$event.stopPropagation()">
              <div class="dropdown-display" (click)="toggleMonthDropdown()">
                {{ months[currentMonth] }}
                <!-- <span class="arrow">&#9662;</span> -->
              </div>
              @if (showMonthDropdown) {
              <ul class="dropdown-list">
                @for (month of months; track month; let i = $index) {
                <li [class.selected]="i === currentMonth" (click)="selectMonth(i)">
                  {{ month }}
                </li>
                }
              </ul>
              }
            </div>
            <!-- Year Dropdown -->
            <div class="dropdown" (click)="$event.stopPropagation()">
              <div class="dropdown-display" (click)="toggleYearDropdown()">
                {{ currentYear }}
                <!-- <span class="arrow">&#9662;</span> -->
              </div>
              @if (showYearDropdown) {
              <ul class="dropdown-list">
                @for (year of years; track year) {
                <li [class.selected]="year === currentYear" (click)="selectYear(year)">
                  {{ year }}
                </li>
                }
              </ul>
              }
            </div>
          </div>
          <div class="nav-btns">
            <button class="nav-btn" (click)="previousMonth()">
              <svg width="8" height="12" viewBox="0 0 8 12" fill="none">
                <path d="M7 1L1 6L7 11" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
            </button>
            <button class="nav-btn" (click)="nextMonth()">
              <svg width="8" height="12" viewBox="0 0 8 12" fill="none">
                <path d="M1 1L7 6L1 11" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
            </button>
          </div>
        </div>
        <div class="calendar-body">
          <div class="calendar-weekdays">
            @for (weekday of weekdays; track weekday) {
            <div class="weekday">
              {{weekday}}
            </div>
            }
          </div>
          <div class="calendar-grid">
            @for (day of calendarDays; track day) {
            <div class="calendar-day" [class.current-month]="day.isCurrentMonth"
              [class.other-month]="!day.isCurrentMonth" [class.today]="day.isToday" [class.selected]="day.isSelected"
              (click)="selectDate(day)">
              {{day.day}}
            </div>
            }
          </div>
        </div>
        <div class="calendar-footer">
          <button class="footer-btn today-btn" (click)="goToToday()">Today</button>
          <button class="footer-btn clear-btn" (click)="clearSelection()">Clear</button>
          <button class="footer-btn close-btn" (click)="closeCalendar()">Close</button>
        </div>
      </div>
    </div>
    }
  </div>
</div>