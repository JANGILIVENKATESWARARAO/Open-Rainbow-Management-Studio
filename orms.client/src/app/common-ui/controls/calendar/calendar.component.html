<div class="dob-container">
    <label class="dob-label">
        {{ label }}
        <span *ngIf="isRequired" class="required-star">*</span>
    </label>

    <div class="input-container">
        <input type="text" class="dob-input" [value]="formattedDate" (click)="openDatePicker($event)"
            placeholder="dd-mm-yyyy" readonly required />
        <svg xmlns="http://www.w3.org/2000/svg" class="calendar-icon" width="20" height="20" viewBox="0 0 24 24"
            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M8 2v4"></path>
            <path d="M16 2v4"></path>
            <rect width="18" height="18" x="3" y="4" rx="2"></rect>
            <path d="M3 10h18"></path>
        </svg>

        <div *ngIf="showCalendar" class="calendar-overlay" (click)="closeCalendar()">
            <div class="calendar-container" (click)="$event.stopPropagation()">
                <div class="calendar-header">
                    <button class="nav-btn" (click)="previousMonth()">
                        <svg width="8" height="12" viewBox="0 0 8 12" fill="none">
                            <path d="M7 1L1 6L7 11" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                        </svg>
                    </button>

                    <div class="month-year-selectors">
                        <select [(ngModel)]="currentMonth" (change)="onMonthChange()" class="month-select">
                            <option *ngFor="let month of months; let i = index" [ngValue]="i">
                                {{month}}
                            </option>
                        </select>

                        <select [(ngModel)]="currentYear" (change)="onYearChange()" class="year-select">
                            <option *ngFor="let year of years" [ngValue]="year">
                                {{year}}
                            </option>
                        </select>
                    </div>

                    <button class="nav-btn" (click)="nextMonth()">
                        <svg width="8" height="12" viewBox="0 0 8 12" fill="none">
                            <path d="M1 1L7 6L1 11" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                        </svg>
                    </button>
                </div>

                <div class="calendar-weekdays">
                    <div *ngFor="let weekday of weekdays" class="weekday">
                        {{weekday}}
                    </div>
                </div>

                <div class="calendar-grid">
                    <div *ngFor="let day of calendarDays" class="calendar-day"
                        [class.current-month]="day.isCurrentMonth" [class.other-month]="!day.isCurrentMonth"
                        [class.today]="day.isToday" [class.selected]="day.isSelected" (click)="selectDate(day)">
                        {{day.day}}
                    </div>
                </div>

                <div class="calendar-footer">
                    <button class="footer-btn today-btn" (click)="goToToday()">Today</button>
                    <button class="footer-btn clear-btn" (click)="clearSelection()">Clear</button>
                    <button class="footer-btn close-btn" (click)="closeCalendar()">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>